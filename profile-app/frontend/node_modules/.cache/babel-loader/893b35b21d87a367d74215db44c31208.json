{"ast":null,"code":"var _jsxFileName = \"/Users/eliher/Desktop/atrasado/lab-profile-app/profile-app/frontend/src/pages/profile.js\";\nimport React, { Component } from \"react\";\nimport Profile from \"../components/profile/index\";\nimport AUTH_SERVICE from \"../services/index\";\n\nclass profile extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      username: \"\",\n      campus: \"\",\n      course: \"\",\n      image: \"\"\n    };\n\n    this.upload = e => {\n      console.log(e.target.files);\n      const formData = new FormData();\n      formData.append(\"image\", e.target.files[0]);\n      AUTH_SERVICE.upload(formData).then(({\n        data\n      }) => {\n        const {\n          user: {\n            username,\n            campus,\n            course,\n            image\n          }\n        } = data;\n        this.setState({\n          username,\n          campus,\n          course,\n          image\n        });\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.logout = async () => {\n      await AUTH_SERVICE.logOut();\n      this.props.history.push(\"/\");\n    };\n  }\n\n  async componentDidMount() {\n    const {\n      data: {\n        user\n      }\n    } = await AUTH_SERVICE.loggedIn();\n    if (!user) return React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 15\n      },\n      __self: this\n    }, \"No user loged\");\n    const {\n      username,\n      campus,\n      course,\n      image\n    } = user;\n    this.setState({\n      username,\n      campus,\n      course,\n      image\n    });\n  }\n\n  render() {\n    return React.createElement(Profile, {\n      username: this.state.username,\n      campus: this.state.campus,\n      course: this.state.course,\n      image: this.state.image,\n      upload: this.upload,\n      logOut: this.logout,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46\n      },\n      __self: this\n    });\n  }\n\n}\n\nexport default profile;","map":{"version":3,"sources":["/Users/eliher/Desktop/atrasado/lab-profile-app/profile-app/frontend/src/pages/profile.js"],"names":["React","Component","Profile","AUTH_SERVICE","profile","state","username","campus","course","image","upload","e","console","log","target","files","formData","FormData","append","then","data","user","setState","catch","err","logout","logOut","props","history","push","componentDidMount","loggedIn","render"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,OAAP,MAAoB,6BAApB;AACA,OAAOC,YAAP,MAAyB,mBAAzB;;AAEA,MAAMC,OAAN,SAAsBH,SAAtB,CAAgC;AAAA;AAAA;AAAA,SAC9BI,KAD8B,GACtB;AACNC,MAAAA,QAAQ,EAAE,EADJ;AAENC,MAAAA,MAAM,EAAE,EAFF;AAGNC,MAAAA,MAAM,EAAE,EAHF;AAINC,MAAAA,KAAK,EAAE;AAJD,KADsB;;AAAA,SAoB9BC,MApB8B,GAoBrBC,CAAC,IAAI;AACZC,MAAAA,OAAO,CAACC,GAAR,CAAYF,CAAC,CAACG,MAAF,CAASC,KAArB;AACA,YAAMC,QAAQ,GAAG,IAAIC,QAAJ,EAAjB;AACAD,MAAAA,QAAQ,CAACE,MAAT,CAAgB,OAAhB,EAAyBP,CAAC,CAACG,MAAF,CAASC,KAAT,CAAe,CAAf,CAAzB;AACAZ,MAAAA,YAAY,CAACO,MAAb,CAAoBM,QAApB,EACGG,IADH,CACQ,CAAC;AAAEC,QAAAA;AAAF,OAAD,KAAc;AAClB,cAAM;AAACC,UAAAA,IAAI,EAAE;AAACf,YAAAA,QAAD;AAAWC,YAAAA,MAAX;AAAmBC,YAAAA,MAAnB;AAA2BC,YAAAA;AAA3B;AAAP,YAA4CW,IAAlD;AACA,aAAKE,QAAL,CAAc;AAAChB,UAAAA,QAAD;AAAWC,UAAAA,MAAX;AAAmBC,UAAAA,MAAnB;AAA2BC,UAAAA;AAA3B,SAAd;AACD,OAJH,EAKGc,KALH,CAKSC,GAAG,IAAI;AACZZ,QAAAA,OAAO,CAACC,GAAR,CAAYW,GAAZ;AACD,OAPH;AAQD,KAhC6B;;AAAA,SAkC9BC,MAlC8B,GAkCrB,YAAY;AACnB,YAAMtB,YAAY,CAACuB,MAAb,EAAN;AACA,WAAKC,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,CAAwB,GAAxB;AACD,KArC6B;AAAA;;AAQ9B,QAAMC,iBAAN,GAA0B;AACxB,UAAM;AAACV,MAAAA,IAAI,EAAE;AAACC,QAAAA;AAAD;AAAP,QAAiB,MAAMlB,YAAY,CAAC4B,QAAb,EAA7B;AACA,QAAI,CAACV,IAAL,EAAW,OAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAAP;AACX,UAAM;AAAEf,MAAAA,QAAF;AAAYC,MAAAA,MAAZ;AAAoBC,MAAAA,MAApB;AAA4BC,MAAAA;AAA5B,QAAsCY,IAA5C;AACA,SAAKC,QAAL,CAAc;AACZhB,MAAAA,QADY;AAEZC,MAAAA,MAFY;AAGZC,MAAAA,MAHY;AAIZC,MAAAA;AAJY,KAAd;AAMD;;AAqBDuB,EAAAA,MAAM,GAAG;AACP,WACE,oBAAC,OAAD;AACE,MAAA,QAAQ,EAAE,KAAK3B,KAAL,CAAWC,QADvB;AAEE,MAAA,MAAM,EAAE,KAAKD,KAAL,CAAWE,MAFrB;AAGE,MAAA,MAAM,EAAE,KAAKF,KAAL,CAAWG,MAHrB;AAIE,MAAA,KAAK,EAAE,KAAKH,KAAL,CAAWI,KAJpB;AAKE,MAAA,MAAM,EAAE,KAAKC,MALf;AAME,MAAA,MAAM,EAAE,KAAKe,MANf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF;AAUD;;AAlD6B;;AAqDhC,eAAerB,OAAf","sourcesContent":["import React, { Component } from \"react\";\nimport Profile from \"../components/profile/index\";\nimport AUTH_SERVICE from \"../services/index\";\n\nclass profile extends Component {\n  state = {\n    username: \"\",\n    campus: \"\",\n    course: \"\",\n    image: \"\"\n  };\n\n  async componentDidMount() {\n    const {data: {user}} = await AUTH_SERVICE.loggedIn();\n    if (!user) return <h1>No user loged</h1>;\n    const { username, campus, course, image } = user;\n    this.setState({\n      username,\n      campus,\n      course,\n      image\n    });\n  }\n\n  upload = e => {\n    console.log(e.target.files)\n    const formData = new FormData();\n    formData.append(\"image\", e.target.files[0]);\n    AUTH_SERVICE.upload(formData)\n      .then(({ data }) => {\n        const {user: {username, campus, course, image}} = data\n        this.setState({username, campus, course, image})\n      })\n      .catch(err => {\n        console.log(err);\n      });\n  };\n\n  logout = async () => {\n    await AUTH_SERVICE.logOut();\n    this.props.history.push(\"/\");\n  };\n\n  render() {\n    return (\n      <Profile\n        username={this.state.username}\n        campus={this.state.campus}\n        course={this.state.course}\n        image={this.state.image}\n        upload={this.upload}\n        logOut={this.logout}\n      />\n    );\n  }\n}\n\nexport default profile;"]},"metadata":{},"sourceType":"module"}